(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-423720f6"],{"00b4":function(t,e,r){"use strict";r("ac1f");var a=r("23e7"),n=r("da84"),s=r("c65b"),o=r("e330"),i=r("1626"),l=r("861d"),c=function(){var t=!1,e=/[ac]/;return e.exec=function(){return t=!0,/./.exec.apply(this,arguments)},!0===e.test("abc")&&t}(),u=n.Error,d=o(/./.test);a({target:"RegExp",proto:!0,forced:!c},{test:function(t){var e=this.exec;if(!i(e))return d(this,t);var r=s(e,this,t);if(null!==r&&!l(r))throw new u("RegExp exec method returned something other than an Object or null");return!!r}})},"0655":function(t,e,r){},"06c5":function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));r("fb6a"),r("d3b7"),r("b0c0"),r("a630"),r("3ca3"),r("ac1f"),r("00b4");var a=r("6b75");function n(t,e){if(t){if("string"===typeof t)return Object(a["a"])(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(a["a"])(t,e):void 0}}},1511:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"album py-5 bg-light"},[r("div",{staticClass:"container"},[r("UserProfileCard",{attrs:{user:t.user,followBtn:t.followBtn},on:{"emit-follow":t.addFollowing,"emit-unFollow":t.deleteFollowing}}),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-4"},[r("UserFollowingsCard",{attrs:{followings:t.followings}}),r("br"),r("UserFollowersCard",{attrs:{followers:t.followers}})],1),r("div",{staticClass:"col-md-8"},[r("UserCommentsCard",{attrs:{comments:t.comments}}),r("br"),r("UserFavoritedRestaurantsCard",{attrs:{favoritedRestaurants:t.favoritedRestaurants}})],1)])],1)])},n=[],s=r("6b75");function o(t){if(Array.isArray(t))return Object(s["a"])(t)}r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0"),r("a630");function i(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var l=r("06c5");r("d9e2");function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t){return o(t)||i(t)||Object(l["a"])(t)||c()}var d=r("5530"),f=r("1da1"),m=(r("96cf"),r("b0c0"),r("4de4"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card mb-3"},[r("div",{staticClass:"row no-gutters"},[r("div",{staticClass:"col-md-4"},[r("img",{attrs:{src:t._f("nullAvatar")(t.user.image),width:"300px",height:"300px"}})]),r("div",{staticClass:"col-md-8"},[r("div",{staticClass:"card-body"},[r("h5",{staticClass:"card-title"},[t._v(t._s(t.user.name))]),r("p",{staticClass:"card-text"},[t._v(t._s(t.user.email))]),r("ul",{staticClass:"list-unstyled list-inline"},[r("li",[r("strong",[t._v(t._s(t.user.commentsAmount))]),t._v(" 已評論餐廳 ")]),r("li",[r("strong",[t._v(t._s(t.user.favoritedRestaurantsAmount))]),t._v(" 收藏的餐廳 ")]),r("li",[r("strong",[t._v(t._s(t.user.followingsAmount))]),t._v(" followings (追蹤者) ")]),r("li",[r("strong",[t._v(t._s(t.user.followersAmount))]),t._v(" followers (追隨者) ")])]),r("p"),t.user.isCurrentUser?r("div",{staticStyle:{display:"contents"}},[r("router-link",{attrs:{to:{name:"user-edit",params:{id:t.user.id}}}},[r("button",{staticClass:"btn btn-primary",attrs:{type:"button"}},[t._v("edit")])])],1):r("div",{staticStyle:{display:"contents"}},[r("transition",{attrs:{name:"fade",mode:"out-in"}},[t.user.isFollowed?r("button",{key:"UnFollow",staticClass:"btn btn-danger",attrs:{disabled:t.followBtn,type:"button"},on:{click:t.emitUnFollow}},[t._v(" 取消追蹤 ")]):r("button",{key:"follow",staticClass:"btn btn-primary",attrs:{disabled:t.followBtn,type:"button"},on:{click:t.emitFollow}},[t._v(" 追蹤 ")])])],1)]),r("p")])])])}),v=[],w=r("2708"),g={props:{user:{type:Object,required:!0},followBtn:{type:Boolean}},mixins:[w["c"]],methods:{emitFollow:function(){this.$emit("emit-follow")},emitUnFollow:function(){this.$emit("emit-unFollow")}}},b=g,p=(r("9044"),r("2877")),h=Object(p["a"])(b,m,v,!1,null,"2e1bdeb4",null),y=h.exports,_=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[t._v(t._s(t.followings.length))]),t._v(" followings (追蹤者)")]),r("transition-group",{staticClass:"card-body",attrs:{name:"fade",tag:"div"}},t._l(t.followings,(function(e){return r("router-link",{key:e.id,attrs:{to:{name:"user",params:{id:e.id}}}},[r("img",{staticClass:"avatar",attrs:{src:t._f("nullAvatar")(e.image),loading:"lazy",width:"60",height:"60"}})])})),1)],1)},C=[],x={props:{followings:{type:Array,required:!0}},mixins:[w["c"]]},A=x,F=(r("f5fe"),Object(p["a"])(A,_,C,!1,null,"026db641",null)),U=F.exports,R=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[t._v(t._s(t.followers.length))]),t._v(" followers (追隨者) ")]),r("transition-group",{staticClass:"card-body",attrs:{name:"fade",tag:"div"}},t._l(t.followers,(function(e){return r("router-link",{key:e.id,attrs:{to:{name:"user",params:{id:e.id}}}},[r("img",{staticClass:"avatar",attrs:{src:t._f("nullAvatar")(e.image),loading:"lazy",width:"60",height:"60"}})])})),1)],1)},k=[],O={props:{followers:{type:Array,required:!0}},mixins:[w["c"]]},j=O,$=(r("f0c5"),Object(p["a"])(j,R,k,!1,null,"53b8cebc",null)),B=$.exports,E=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[t._v(t._s(t.comments.length))]),t._v(" 已評論餐廳")]),r("div",{staticClass:"card-body"},t._l(t.comments,(function(e){return r("router-link",{key:e.id,attrs:{to:{name:"restaurant",params:{id:e.RestaurantId}}}},[r("img",{staticClass:"avatar",attrs:{src:t._f("nullRestaurant")(e.Restaurant.image),loading:"lazy",width:"60",height:"60"}})])})),1)])},S=[],I={props:{comments:{type:Array,required:!0}},mixins:[w["d"]]},q=I,z=Object(p["a"])(q,E,S,!1,null,null,null),J=z.exports,M=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[t._v(t._s(t.favoritedRestaurants.length))]),t._v(" 收藏的餐廳 ")]),r("div",{staticClass:"card-body"},t._l(t.favoritedRestaurants,(function(e){return r("router-link",{key:e.id,attrs:{to:{name:"restaurant",params:{id:e.Favorite.RestaurantId}}}},[r("img",{staticClass:"avatar",attrs:{src:t._f("nullRestaurant")(e.image),loading:"lazy",width:"60",height:"60"}})])})),1)])},P=[],T={props:{favoritedRestaurants:{type:Array,required:!0}},mixins:[w["d"]]},K=T,D=Object(p["a"])(K,M,P,!1,null,null,null),G=D.exports,H=r("4cce"),L=r("2fa3"),N={components:{UserProfileCard:y,UserFollowingsCard:U,UserFollowersCard:B,UserCommentsCard:J,UserFavoritedRestaurantsCard:G},data:function(){return{user:{id:"",name:"",email:"",image:"",isFollowed:!1,isCurrentUser:!1,commentsAmount:-1,favoritedRestaurantsAmount:-1,followingsAmount:-1,followersAmount:-1},followings:[],followers:[],comments:[],favoritedRestaurants:[],followBtn:!1}},computed:{currentUser:function(){return{id:this.$store.state.currentUser.id,image:this.$store.state.currentUser.image}}},methods:{fetchUser:function(t){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function r(){var a,n,s,o,i,l,c,f,m,v,w,g;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,H["a"].get({userId:t});case 3:if(a=r.sent,"OK"===a.statusText){r.next=6;break}throw new Error(a.data);case 6:n=a.data,s=n.profile,o=n.isFollowed,i=s.id,l=s.name,c=s.email,f=s.image,m=s.Followings,v=s.Followers,w=s.Comments,g=s.FavoritedRestaurants,e.user=Object(d["a"])(Object(d["a"])({},e.user),{},{id:i,name:l,email:c,image:f,isFollowed:o,isCurrentUser:i===e.currentUser.id,commentsAmount:w.length,favoritedRestaurantsAmount:g.length,followingsAmount:m.length,followersAmount:v.length}),e.followings=u(m),e.followers=u(v),e.comments=u(w),e.favoritedRestaurants=u(g),r.next=19;break;case 15:r.prev=15,r.t0=r["catch"](0),console.log(r.t0),L["a"].fire({icon:"error",title:"".concat(r.t0)});case 19:case"end":return r.stop()}}),r,null,[[0,15]])})))()},addFollowing:function(){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.followBtn=!0,e.prev=1,e.next=4,H["a"].addFollowing({userId:t.user.id});case 4:if(r=e.sent,a=r.data,"success"===a.status){e.next=8;break}throw new Error(a.message);case 8:t.user.isFollowed=!0,t.followers.push({id:t.currentUser.id,image:t.currentUser.image}),t.followBtn=!1,e.next=18;break;case 13:e.prev=13,e.t0=e["catch"](1),t.followBtn=!1,console.log(e.t0),L["a"].fire({icon:"error",title:"".concat(e.t0)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])})))()},deleteFollowing:function(){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.followBtn=!0,e.prev=1,e.next=4,H["a"].deleteFollowing({userId:t.user.id});case 4:if(r=e.sent,a=r.data,"success"===a.status){e.next=8;break}throw new Error(a.message);case 8:t.followers=t.followers.filter((function(e){return e.id!==t.currentUser.id})),t.user.isFollowed=!1,t.followBtn=!1,e.next=18;break;case 13:e.prev=13,e.t0=e["catch"](1),t.followBtn=!1,console.log(e.t0),L["a"].fire({icon:"error",title:"".concat(e.t0)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])})))()}},created:function(){this.fetchUser(this.$route.params.id)},beforeRouteUpdate:function(t,e,r){this.fetchUser(t.params.id),r()}},Q=N,V=Object(p["a"])(Q,a,n,!1,null,null,null);e["default"]=V.exports},4625:function(t,e,r){},"4df4":function(t,e,r){"use strict";var a=r("da84"),n=r("0366"),s=r("c65b"),o=r("7b0b"),i=r("9bdd"),l=r("e95a"),c=r("68ee"),u=r("07fa"),d=r("8418"),f=r("9a1f"),m=r("35a1"),v=a.Array;t.exports=function(t){var e=o(t),r=c(this),a=arguments.length,w=a>1?arguments[1]:void 0,g=void 0!==w;g&&(w=n(w,a>2?arguments[2]:void 0));var b,p,h,y,_,C,x=m(e),A=0;if(!x||this==v&&l(x))for(b=u(e),p=r?new this(b):v(b);b>A;A++)C=g?w(e[A],A):e[A],d(p,A,C);else for(y=f(e,x),_=y.next,p=r?new this:[];!(h=s(_,y)).done;A++)C=g?i(y,w,[h.value,A],!0):h.value,d(p,A,C);return p.length=A,p}},5616:function(t,e,r){},"6b75":function(t,e,r){"use strict";function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}r.d(e,"a",(function(){return a}))},9044:function(t,e,r){"use strict";r("0655")},"9bdd":function(t,e,r){var a=r("825a"),n=r("2a62");t.exports=function(t,e,r,s){try{return s?e(a(r)[0],r[1]):e(r)}catch(o){n(t,"throw",o)}}},a630:function(t,e,r){var a=r("23e7"),n=r("4df4"),s=r("1c7e"),o=!s((function(t){Array.from(t)}));a({target:"Array",stat:!0,forced:o},{from:n})},d28b:function(t,e,r){var a=r("746f");a("iterator")},e01a:function(t,e,r){"use strict";var a=r("23e7"),n=r("83ab"),s=r("da84"),o=r("e330"),i=r("1a2d"),l=r("1626"),c=r("3a9b"),u=r("577e"),d=r("9bf2").f,f=r("e893"),m=s.Symbol,v=m&&m.prototype;if(n&&l(m)&&(!("description"in v)||void 0!==m().description)){var w={},g=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:u(arguments[0]),e=c(v,this)?new m(t):void 0===t?m():m(t);return""===t&&(w[e]=!0),e};f(g,m),g.prototype=v,v.constructor=g;var b="Symbol(test)"==String(m("test")),p=o(v.toString),h=o(v.valueOf),y=/^Symbol\((.*)\)[^)]+$/,_=o("".replace),C=o("".slice);d(v,"description",{configurable:!0,get:function(){var t=h(this),e=p(t);if(i(w,t))return"";var r=b?C(e,7,-1):_(e,y,"$1");return""===r?void 0:r}}),a({global:!0,forced:!0},{Symbol:g})}},f0c5:function(t,e,r){"use strict";r("4625")},f5fe:function(t,e,r){"use strict";r("5616")},fb6a:function(t,e,r){"use strict";var a=r("23e7"),n=r("da84"),s=r("e8b5"),o=r("68ee"),i=r("861d"),l=r("23cb"),c=r("07fa"),u=r("fc6a"),d=r("8418"),f=r("b622"),m=r("1dde"),v=r("f36a"),w=m("slice"),g=f("species"),b=n.Array,p=Math.max;a({target:"Array",proto:!0,forced:!w},{slice:function(t,e){var r,a,n,f=u(this),m=c(f),w=l(t,m),h=l(void 0===e?m:e,m);if(s(f)&&(r=f.constructor,o(r)&&(r===b||s(r.prototype))?r=void 0:i(r)&&(r=r[g],null===r&&(r=void 0)),r===b||void 0===r))return v(f,w,h);for(a=new(void 0===r?b:r)(p(h-w,0)),n=0;w<h;w++,n++)w in f&&d(a,n,f[w]);return a.length=n,a}})}}]);
//# sourceMappingURL=chunk-423720f6.11221711.js.map